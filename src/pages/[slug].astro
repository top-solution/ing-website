---
import { getCollection } from "astro:content";
import { Icon } from "astro-icon";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import Section from "../components/Section.astro";
import type { NavItem } from "../components/Nav.astro";
import { contentQuery } from "../query";

const title = "Mario Rossi";
const description = "Mario Rossi";

const nav: NavItem[] = [];

export async function getStaticPaths() {
const contentQueryResult = await contentQuery("projects");
	if (! contentQueryResult.data.page) {
		console.error('page is missing')
	}

  return contentQueryResult.data.page.content[0].projects.map((project: any) => ({
		params: {slug: project.slug}
	}));
}

const { slug } = Astro.params;
const contentQueryResult = await contentQuery(`${slug}`);


---
<>
<Layout title={title} description={description} slug={slug ?? ''}>
	{
		contentQueryResult?.data?.page?.content[0].project ? (
				// Project page stuff here 
				<pre>{JSON.stringify(contentQueryResult, null, 4)}</pre>
			) : null
		}
</Layout>
</>


<style></style>
